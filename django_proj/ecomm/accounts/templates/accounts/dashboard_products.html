{% extends 'store/base.html' %}
{% load static %}

{% block content %}

<div>
    <h1 class="text-center">Products</h1>
    <h3 class="text-center">{{user.vendor}}</h3>
</div>


{% if user.vendor.is_activated %}

<div>
    {% with request.resolver_match.url_name as url_name %}
    <ul class="nav nav-pills justify-content-center mb-5">
        <li class="nav-item ">
            <a class="nav-link {% if url_name == 'dashboard' %}active{% endif %}" href="{% url 'dashboard' %}">Dashboard</a>
        </li>
    
        <li class="nav-item">
            <a class="nav-link {% if url_name == 'dashboard-orders' %}active{% endif %}" href="{% url 'dashboard-orders' %}">Orders</a>
        </li>
    
        <li class="nav-item">
            <a class="nav-link {% if url_name == 'dashboard-products' %}active{% endif %}" href="{% url 'dashboard-products' %}">Products</a>
        </li>

        <li class="nav-item">
            <a class="nav-link {% if url_name == 'dashboard-finances' %}active{% endif %}" href="{% url 'dashboard-finances' %}">Finances</a>
        </li>
        
    </ul>
    {% endwith %}
</div>

<h1>Products</h1>
<a href="{% url 'add-product' %}" class="btn btn-outline-primary">Add Product</a>
<table class="table table-striped">
    <thead>
        <th>Name</th>
        <th>Price</th>
        <th>SubCat</th>
        <th>Cat</th>
        <th>Image</th>
        <th>View Product</th>
        <th>Activate</th>
        <th>Modify Product</th>
        <th>Delete Product</th>
    </thead>
    <tbody>
        {% for product in products %}
        <tr>
            <td>{{product.name}}</td>
            <td>{{product.price}}</td>
            <td>{{product.subCategory}}</td>
            <td>{{product.category}}</td>
            <td><img class="row-image" src="{{product.imageURL}}"></td>
            <td><a class="btn btn-outline-secondary" href="{% url 'product' product.slug %}">View</a></td>
            <td>
                {% if product.activate %}
                    <div class="bg-success">Activated</div>
                {% else %}
                    <div class="bg-secondary">De-activated</div>
                {% endif %}
            </td>
            <td><a class="btn btn-outline-primary" href="{% url 'dashboard-productsdetails' product.id %}">Modify</a></td>
            <td><a class="btn btn-danger" href="{% url 'dashboard-productsdelete' product.id %}">DELETE</a></td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% else %}
    <p>Please wait for activiation</p>
{% endif %}

{% endblock content %}